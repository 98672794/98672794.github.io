<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ³å®£å‚³ç‹ğŸ³</title>
    <link rel="stylesheet" href="aki.css">
    <script src="https://cdn.staticfile.org/pako/1.0.10/pako.min.js">//TxtZip </script>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script><!-- ç”¨æ–¼è²¼jså­— -->
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.min.js">//SHA256</script>
    <script src="å»£æ–™.js">// æ¨¡æ“¬å¾è³‡æ–™åº«è®€å–å»£å‘Šè³‡æ–™</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
</head>
<body>
    <header>
        <h1>ğŸ³å®£å‚³ç‹ğŸ³</h1>
        <!-- m.js _ç¶²æ’ä»¶('é ­','html','#é ­',0) -->
    </header>




























    <main>
        <div class="search-container">
            <div class="search-section">
                <label for="region-select">åœ°å€æœå°‹</label>
                <select id="region-select">
                    <option value="">è«‹é¸æ“‡åœ°å€</option>
                </select>
            </div>

            <div class="search-section">
                <label for="industry-select">è¡Œæ¥­æœå°‹</label>
                <select id="industry-select">
                    <option value="">è«‹é¸æ“‡è¡Œæ¥­</option>
                </select>
            </div>

            <div class="search-section">
                <label for="merchant-select">å•†æˆ¶æœå°‹</label>
                <select id="merchant-select">
                    <option value="">è«‹é¸æ“‡å•†æˆ¶</option>
                </select>
            </div>

            <div class="search-section">
                <label for="keyword-input">é—œéµå­—æœå°‹</label>
                <input type="text" id="keyword-input" placeholder="è¼¸å…¥é—œéµå­—">
            </div>
        </div>
        <button onclick="searchAds()">æœå°‹</button>
        <br><br>

        <div id="adContainer" class="ad-grid">
            <!-- å»£å‘Šæœƒåœ¨é€™è£¡å‹•æ…‹è¼‰å…¥ -->
        </div>
        <div class="pagination">
            <button onclick="changePage(-1)">ä¸Šä¸€é </button>
            <button onclick="changePage(1)">ä¸‹ä¸€é </button>
        </div>
    </main>
    <nav id="å°èˆª">
        <h1>ğŸ³å®£å‚³ç‹ğŸ³</h1>
        <!-- m.js _ç¶²æ’ä»¶('å°èˆª','html','#å°èˆª',0) -->
    </nav>



















    <script>
        let currentPage = 1;
        const adsPerPage = 8;

        // å¾localStorageè®€å–æ”¶è—çš„å»£å‘ŠID
        const collectedAds = JSON.parse(localStorage.getItem('collectedAds')) || [];

        function loadAds(ads) {
            const adContainer = document.getElementById('adContainer');
            adContainer.innerHTML = ''; // æ¸…ç©ºå®¹å™¨

            const startIndex = (currentPage - 1) * adsPerPage;
            const endIndex = startIndex + adsPerPage;
            const paginatedAds = ads.slice(startIndex, endIndex);

            if (paginatedAds.length === 0) {
                adContainer.innerHTML = '<div class="no-ads"><h3>æš«æ™‚æ²’æœ‰å¯ä¾›å±•ç¤ºçš„å»£å‘Š</h3><p>è«‹ç¨å¾Œå†ä¾†æŸ¥çœ‹æˆ–å˜—è©¦å…¶ä»–æœå°‹æ¢ä»¶ã€‚</p></div>';
                return;
            }

            paginatedAds.forEach((ad) => {
                const adElement = document.createElement('div');
                adElement.className = 'ad-item';
                adElement.innerHTML = `
                    <img src="${ad.imageSrc}" alt="å»£å‘Š ${ad.id}" title="${ad.id}" width="300" height="300" ondblclick="zoomAd('${ad.id}', '${ad.imageSrc}')">
                    <div class="ad-actions">
                        <button onclick="collectAd('${ad.id}')">
                            ${collectedAds.includes(ad.id) ? 'å–æ¶ˆæ”¶è—' : 'æ”¶è—'}
                        </button>
                        <button onclick="showShareOptions('${ad.id}', '${ad.keywords.join(', ')}', '${ad.imageSrc}')">åˆ†äº«</button>
                    </div>
                `;
                adContainer.appendChild(adElement);
            });
        }

        function searchAds() {
            const region = document.getElementById('region-select').value;
            const industry = document.getElementById('industry-select').value;
            const merchant = document.getElementById('merchant-select').value;
            const keyword = document.getElementById('keyword-input').value.toLowerCase();

            const filteredAds = allAds.filter(ad => {
                const matchesRegion = region ? ad.region === region : true;
                const matchesIndustry = industry ? ad.industry === industry : true;
                const matchesMerchant = merchant ? ad.merchant === merchant : true;
                const matchesKeyword = keyword ? ad.keywords.some(k => k.includes(keyword)) : true;

                return matchesRegion && matchesIndustry && matchesMerchant && matchesKeyword;
            });

            currentPage = 1;
            loadAds(filteredAds);
        }

        function collectAd(id) {
            const index = collectedAds.indexOf(id);
            if (index > -1) {
                collectedAds.splice(index, 1);
                //alert('å·²å¾æ”¶è—ä¸­ç§»é™¤ï¼');
            } else {
                collectedAds.push(id);
                //alert('å·²æ·»åŠ åˆ°æ”¶è—ï¼');
            }
            localStorage.setItem('collectedAds', JSON.stringify(collectedAds));
            loadAds(allAds);
        }

        function showShareOptions(id, keywords, imageSrc) {
            const shareUrl = `${window.location.origin}${window.location.pathname}?${id}`;
            document.getElementById('shareContainer').style.display = 'flex';
            document.getElementById('shareContainer').dataset.url = shareUrl;
            document.getElementById('shareContainer').dataset.title = keywords;
            document.getElementById('shareContainer').dataset.content = 'æ‚¨æœ‹å‹çµ¦æ‚¨åˆ†äº«äº†å»£å‘Šç‹çš„å»£å‘Š';
            document.getElementById('shareContainer').dataset.pic = imageSrc;
        }

        // æ”¾å¤§å»£å‘Š
        function zoomAd(id, imageSrc) {
            const overlay = document.createElement('div');
            overlay.className = 'zoom-overlay';
            overlay.innerHTML = `<img src="${imageSrc}" alt="æ”¾å¤§å»£å‘Šåœ–ç‰‡">`;
            overlay.onclick = function(event) {
                if (event.target === overlay) {
                    closeZoom();
                }
            };
            document.body.appendChild(overlay);
            window.history.pushState({}, '', `?${id}`);
        }
        
        function closeZoom() {
            const overlay = document.querySelector('.zoom-overlay');
            if (overlay) {
                overlay.remove();
            }
            window.history.pushState({}, '', window.location.pathname);
        }

        function changePage(direction) {
            const totalPages = Math.ceil(allAds.length / adsPerPage);
            currentPage += direction;
            if (currentPage < 1) currentPage = 1;
            if (currentPage > totalPages) currentPage = totalPages;
            loadAds(allAds);
        }

        // é é¢åŠ è¼‰æ™‚é¡¯ç¤ºå»£å‘Š
        loadAds(allAds);


        // æ‰“é–‹åˆ†äº«çš„å»£å‘Š
        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const adId = params.keys().next().value;
            if (adId) {
                const ad = allAds.find(ad => ad.id === adId);
                if (ad) {
                    zoomAd(adId, ad.imageSrc);
                }
            }
        }

        // éš±è—åˆ†äº«é¸é …
        function hideShareOptions() {
            document.getElementById('shareContainer').style.display = 'none';
        }

        function shareOnSocialMedia(type) {
            const container = document.getElementById('shareContainer');
            const url = container.dataset.url;
            const title = container.dataset.title;
            const content = container.dataset.content;
            const pic = container.dataset.pic;
            let shareUrl;
            switch (type) {
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${encodeURIComponent(title + '\n' + url)}`;
                    break;
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}`;
                    break;
                case 'line':
                    shareUrl = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(url)}`;
                    break;
                case 'telegram':
                    shareUrl = `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`;
                    break;
                case 'weixin':
                    alert('å¾®ä¿¡åˆ†äº«è«‹ä½¿ç”¨å¾®ä¿¡å®¢æˆ¶ç«¯å…§çš„åˆ†äº«åŠŸèƒ½');
                    hideShareOptions();
                    return;
                case 'xiaohongshu':
                    alert('å°ç´…æ›¸åˆ†äº«è«‹ä½¿ç”¨å°ç´…æ›¸å®¢æˆ¶ç«¯å…§çš„åˆ†äº«åŠŸèƒ½');
                    hideShareOptions();
                    return;
                case 'instagram':
                    alert('Instagramåˆ†äº«è«‹ä½¿ç”¨Instagramå®¢æˆ¶ç«¯å…§çš„åˆ†äº«åŠŸèƒ½');
                    hideShareOptions();
                    return;
                default:
                    alert('ä¸æ”¯æŒçš„åˆ†äº«é¡å‹');
                    hideShareOptions();
                    return;
            }
            window.open(shareUrl, '_blank');
            hideShareOptions();
        }
    </script>























<div id="shareContainer" class="share-container">
    <!-- m.js _ç¶²æ’ä»¶('åˆ†äº«','html','#shareContainer',0) -->
</div>

<script src="m.js"></script>
<script src="aki.js"></script>
<script src="https://cdn.staticfile.net/translate.js/3.1.7/translate.js"></script>
<script>
    // ç¿»è­¯ 
    translate.language.setLocal('chinese_traditional'); //è¨­ç½®æœ¬åœ°èªç¨®ï¼ˆç•¶å‰ç¶²é çš„èªç¨®ï¼‰ã€‚å¦‚æœä¸è¨­ç½®ï¼Œé»˜èªè‡ªå‹•è­˜åˆ¥ç•¶å‰ç¶²é é¡¯ç¤ºæ–‡å­—çš„èªç¨®ã€‚ å¯å¡«å¯«å¦‚ 'english'ã€'chinese_simplified' ç­‰ï¼Œå…·é«”åƒè¦‹æ–‡æª”ä¸‹æ–¹é—œæ–¼æ­¤çš„èªªæ˜ã€‚
    translate.service.use('client.edge'); //è¨­ç½®æ©Ÿå™¨ç¿»è­¯æœå‹™é€šé“ï¼Œç›´æ¥å®¢æˆ¶ç«¯æœ¬èº«ï¼Œä¸ä¾è³´æœå‹™ç«¯ ã€‚ç›¸é—œèªªæ˜åƒè€ƒ http://translate.zvo.cn/43086.html
    translate.execute();//é€²è¡Œç¿»è­¯ 
</script>
</body>
</html>
